<!DOCTYPE html>
<!-- index.html -->
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionnaire - ETS La Charit√© Modeste</title>
    <link rel="icon" href="logo.jpg" type="image/jpeg">
    <link rel="preload" as="image" href="logo.jpg">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="login-container">
        <form id="login-form">
            <img src="logo.jpg" alt="Logo ETS La Charit√© Modeste" class="login-logo">
            <h2>Connexion Gestionnaire</h2>
            <div class="form-row-login">
                <label for="login-username">Nom d'utilisateur:</label>
                <input type="text" id="login-username" required>
            </div>
            <div class="form-row-login">
                <label for="login-password">Mot de passe:</label>
                <input type="password" id="login-password" required>
            </div>
            <p id="login-error-message" class="error-message hidden">Nom d'utilisateur ou mot de passe incorrect.</p>
            <button type="submit" id="login-button">Se Connecter</button>
        </form>
    </div>

    <div id="printable-area" class="hidden">
        <header class="header-container">
            <img src="logo.jpg" alt="Logo ETS La Charit√© Modeste" class="logo">
            <h1>Gestionnaire de ETS La Charit√© Modeste</h1>
            <div class="user-info">
                Utilisateur: <span id="user-info-username"></span>
                (<span id="user-info-status"></span>)
            </div>
            <button id="logout-button" class="secondary-btn">D√©connexion</button>
        </header>

        <nav class="main-buttons">
             <button id="show-supply-section">üì• <span>Approvisionner</span></button>
             <button id="show-sales-section">üõí <span>Ventes / Divers</span></button>
             <button id="show-employees-section">üë• <span>Employ√©s</span></button>
             <button id="show-learners-section">üéì <span>Apprenants</span></button>
             <button id="show-mobile-money-section">üì± <span>Mobile Money</span></button>
             <button id="show-creditors-section">üßæ <span>Cr√©dit Client</span></button>
             <button id="show-debt-section">üè¶ <span>Dette / Pr√™t</span></button>
             <button id="show-equipment-section">üõ†Ô∏è <span>Outils Confi√©s</span></button>
             <button id="show-piece-en-ligne-section">üìÑ <span>Pi√®ce en Ligne</span></button> <!-- NEW BUTTON -->
             <button id="show-wifi-zone-section">üì° <span>WIFI ZONE</span></button> <!-- NEW BUTTON -->
             <button id="generate-invoice-button">üìÑ <span>G√©n√©rer Facture</span></button>
             <button id="show-invoice-history-section">üìú <span>Historique Factures</span></button> <!-- NEW BUTTON -->
             <button id="show-report-section">üìä <span>Bilans</span></button>
             <button id="show-admin-section">‚öôÔ∏è <span>Administration</span></button>
        </nav>

        <!-- START: Added Global Search Input (Kept as is) -->
        <div class="search-container" style="margin-bottom: 25px; padding: 0 10px; text-align: center;">
             <label for="global-search-input" style="margin-right: 10px; font-weight: 600; color: var(--color-primary);">Recherche Globale D√©signation/Motif :</label>
             <input type="search" id="global-search-input" placeholder="Filtrer tous les tableaux..." style="width: clamp(250px, 40%, 400px); padding: 9px 14px; border: 1px solid var(--color-input-border); border-radius: 6px; font-size: 1em;">
        </div>
        <!-- END: Added Global Search Input -->

        <main>
            <!-- Section Approvisionner (Existing - Unchanged Structure) -->
            <section id="supply-section" class="form-container hidden">
                 <h2>Approvisionnements</h2>
                 <form id="supply-form">
                      <input type="hidden" id="supply-edit-index" value="">
                     <div class="form-row">
                         <div>
                             <label for="supply-date">Date:</label>
                             <input type="date" id="supply-date" required>
                         </div>
                         <div>
                             <label for="supply-user-connected">Utilisateur connect√©:</label>
                             <input type="text" id="supply-user-connected" class="user-connected-field" readonly>
                         </div>
                         <div>
                             <label for="supply-type">Type d'Approvisionnement:</label>
                             <select id="supply-type" required>
                                 <option value="">-- Choisir --</option>
                                 <option value="Papeterie">Papeterie</option>
                                 <option value="Mat√©riels √©lectrique">Mat√©riels √©lectrique</option>
                                 <option value="Divers">Divers</option>
                             </select>
                         </div>
                         <div>
                             <label for="supply-designation">D√©signation:</label>
                             <input type="text" id="supply-designation" required>
                         </div>
                          <div>
                             <label for="supply-quantity">Quantit√©:</label>
                             <input type="number" id="supply-quantity" min="1" required>
                         </div>
                         <div>
                             <label for="supply-unit-price">Prix unitaire:</label>
                             <input type="number" id="supply-unit-price" min="0" step="any" required>
                         </div>
                         <div>
                             <label for="supply-total-amount">Montant Total:</label>
                             <input type="number" id="supply-total-amount" min="0" step="any" readonly>
                         </div>
                     </div>
                     <button type="submit">Ajouter Approvisionnement</button>
                 </form>

                 <button id="show-supply-list-button" class="secondary-btn">Afficher/Masquer Liste Approvisionnements</button>
                 <div id="supply-list-container" class="printable-content hidden">
                      <h3>Liste des Approvisionnements</h3>
                      <!-- START: Added Table Search -->
                      <div class="table-search-container">
                          <label for="search-input-supply">Filtrer par D√©signation/Date:</label>
                          <input type="search" id="search-input-supply" data-table-id="supply-table" data-column-class="designation-col,date-col" placeholder="D√©signation ou Date (AAAA-MM-JJ)...">
                      </div>
                      <!-- END: Added Table Search -->
                      <div class="button-group">
                         <button id="print-supply" class="print-export-btn">Imprimer</button>
                         <button id="export-supply-excel" class="print-export-btn">Exporter Excel</button>
                         <button id="export-supply-pdf" class="print-export-btn">Exporter PDF</button>
                     </div>
                     <div class="table-container">
                         <table id="supply-table">
                             <thead>
                                 <tr >
                                     <th class="date-col sortable-header">Date</th>
                                     <th class="type-col">Type</th>
                                     <th class="designation-col">D√©signation</th>
                                     <th class="quantity-col">Quantit√©</th>
                                     <th class="unit-price-col">Prix Unitaire</th>
                                     <th class="amount-col">Montant Total</th>
                                     <th class="user-col">Utilisateur</th>
                                     <th class="actions-header no-print no-export">Actions</th>
                                 </tr>
                             </thead>
                             <tbody>
                                 <!-- Rows generated by JS -->
                             </tbody>
                         </table>
                     </div>
                 </div>

                 <button id="show-stock-details-button" class="secondary-btn">Afficher/Masquer √âtat des Stocks</button>
                 <div id="stock-details-container" class="printable-content hidden">
                     <h3>√âtat des Stocks (Papeterie & Mat. √âlectrique)</h3>
                     <!-- START: Added Table Search -->
                     <div class="table-search-container">
                         <label for="search-input-stock">Filtrer par D√©signation:</label>
                         <input type="search" id="search-input-stock" data-table-id="stock-table" data-column-class="designation-col" placeholder="D√©signation...">
                     </div>
                     <!-- END: Added Table Search -->
                     <div class="button-group">
                         <button id="print-stock" class="print-export-btn">Imprimer</button>
                         <button id="export-stock-excel" class="print-export-btn">Exporter Excel</button>
                         <button id="export-stock-pdf" class="print-export-btn">Exporter PDF</button>
                     </div>
                     <div class="table-container">
                         <table id="stock-table">
                             <thead>
                                 <tr>
                                     <th class="type-col">Type</th>
                                     <th class="date-col">Date Derni√®re Modif.</th>
                                     <th class="designation-col">D√©signation</th>
                                     <th class="supply-col">Qt√© Appro.</th>
                                     <th class="sold-col">Qt√© Vendue</th>
                                     <th class="remaining-col">Qt√© Restante</th>
                                 </tr>
                             </thead>
                             <tbody>
                                 <!-- Rows generated by JS -->
                             </tbody>
                         </table>
                     </div>
                 </div>
            </section>

             <!-- Section Ventes / Divers (Existing - Unchanged Structure) -->
             <section id="sales-section" class="form-container hidden">
                <h2>Ventes / Op√©rations Diverses</h2>
                <form id="sales-form">
                    <input type="hidden" id="sales-edit-index" value="">
                    <input type="hidden" id="sales-edit-type" value="">

                    <div class="form-row">
                         <div>
                            <label for="sale-date">Date:</label>
                            <input type="date" id="sale-date" required>
                        </div>
                        <div>
                            <label for="sales-user-connected">Utilisateur connect√©:</label>
                            <input type="text" id="sales-user-connected" class="user-connected-field" readonly>
                        </div>
                        <div>
                            <label for="operation-type">Type d'Op√©ration:</label>
                            <select id="operation-type">
                                <option value="Papeterie">Papeterie</option>
                                <option value="Mat√©riels √©lectrique">Mat√©riels √©lectrique</option>
                                <option value="D√©penses">D√©penses</option>
                                <option value="Divers">Divers</option>
                            </select>
                        </div>
                    </div>
                    <!-- Champs Papeterie -->
                    <div class="form-row details-form" id="papeterie-details-form" style="display: flex;">
                         <div><label for="sale-designation">D√©signation Papeterie:</label><select id="sale-designation"></select></div>
                         <div><label for="sale-quantity">Quantit√© Papeterie:</label><input type="number" id="sale-quantity" min="1"></div>
                         <div><label for="sale-unit-price">Prix unitaire Papeterie:</label><input type="number" id="sale-unit-price" min="0" step="any"></div>
                         <div><label for="sale-total-amount">Montant Total Papeterie:</label><input type="number" id="sale-total-amount" readonly></div>
                    </div>
                    <!-- Champs Mat√©riels √âlectrique -->
                    <div class="form-row details-form" id="materiel-electrique-details-form" style="display: none;">
                         <div><label for="me-designation">D√©signation Mat. Elec.:</label><select id="me-designation"></select></div>
                         <div><label for="me-quantity">Quantit√© Mat. Elec.:</label><input type="number" id="me-quantity" min="1"></div>
                         <div><label for="me-unit-price">Prix unitaire Mat. Elec.:</label><input type="number" id="me-unit-price" min="0" step="any"></div>
                         <div><label for="me-total-amount">Montant Total Mat. Elec.:</label><input type="number" id="me-total-amount" readonly></div>
                    </div>
                    <!-- Champs D√©penses -->
                    <div class="form-row details-form" id="depenses-details-form" style="display: none;">
                        <div><label for="expense-reason">Motif D√©pense:</label><input type="text" id="expense-reason"></div>
                        <div><label for="expense-quantity">Quantit√© D√©pense (Optionnel):</label><input type="number" id="expense-quantity" min="0"></div>
                        <div><label for="expense-amount">Montant Total D√©pense:</label><input type="number" id="expense-amount" min="0" step="any"></div>
                    </div>
                     <!-- Champs Divers -->
                    <div class="form-row details-form" id="divers-details-form" style="display: none;">
                        <div><label for="other-designation">D√©signation Divers:</label><input type="text" id="other-designation"></div>
                        <div><label for="other-quantity">Quantit√© Divers (Optionnel):</label><input type="number" id="other-quantity" min="0"></div>
                        <div><label for="other-total-amount">Montant Total Divers:</label><input type="number" id="other-total-amount" min="0" step="any"></div>
                    </div>
                    <button type="submit">Ajouter</button> <!-- Button text changed dynamically by JS on edit -->
                </form>

                <button id="show-sales-details-button" class="secondary-btn">Afficher/Masquer D√©tails Papeterie</button>
                <button id="show-materiel-electrique-details-button" class="secondary-btn">Afficher/Masquer D√©tails Mat. √âlectrique</button>
                <button id="show-expenses-details-button" class="secondary-btn">Afficher/Masquer D√©tails D√©penses</button>
                <button id="show-others-details-button" class="secondary-btn">Afficher/Masquer D√©tails Divers</button>

                <!-- Conteneur pour D√©tails Papeterie -->
                <div id="sales-details-container" class="printable-content hidden">
                     <h3>D√©tails Ventes Papeterie</h3>
                     <!-- START: Added Table Search -->
                     <div class="table-search-container">
                         <label for="search-input-sales">Filtrer par D√©signation/Date:</label>
                         <input type="search" id="search-input-sales" data-table-id="sales-table" data-column-class="designation-col,date-col" placeholder="D√©signation ou Date (AAAA-MM-JJ)...">
                     </div>
                     <!-- END: Added Table Search -->
                     <div class="button-group">
                        <button id="print-sales" class="print-export-btn">Imprimer</button>
                        <button id="export-sales-excel" class="print-export-btn">Exporter Excel</button>
                        <button id="export-sales-pdf" class="print-export-btn">Exporter PDF</button>
                    </div>
                    <div class="table-container">
                        <table id="sales-table">
                            <thead>
                                <tr >
                                    <th class="date-col sortable-header">Date</th>
                                    <th class="designation-col">D√©signation</th>
                                    <th class="quantity-col">Quantit√©</th>
                                    <th class="unit-price-col">Prix unitaire</th>
                                    <th class="amount-col">Montant total</th>
                                    <th class="user-col">Utilisateur</th>
                                    <th class="actions-header no-print no-export">Actions</th> <!-- Header for Edit/Delete -->
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Rows generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Conteneur pour D√©tails Mat√©riels √âlectrique -->
                <div id="materiel-electrique-details-container" class="printable-content hidden">
                     <h3>D√©tails Ventes Mat√©riels √âlectrique</h3>
                     <!-- START: Added Table Search -->
                     <div class="table-search-container">
                         <label for="search-input-materiel-electrique">Filtrer par D√©signation/Date:</label>
                         <input type="search" id="search-input-materiel-electrique" data-table-id="materiel-electrique-table" data-column-class="designation-col,date-col" placeholder="D√©signation ou Date (AAAA-MM-JJ)...">
                     </div>
                     <!-- END: Added Table Search -->
                     <div class="button-group">
                        <button id="print-materiel-electrique" class="print-export-btn">Imprimer</button>
                        <button id="export-materiel-electrique-excel" class="print-export-btn">Exporter Excel</button>
                        <button id="export-materiel-electrique-pdf" class="print-export-btn">Exporter PDF</button>
                    </div>
                    <div class="table-container">
                        <table id="materiel-electrique-table">
                            <thead>
                                <tr >
                                    <th class="date-col sortable-header">Date</th>
                                    <th class="designation-col">D√©signation</th>
                                    <th class="quantity-col">Quantit√©</th>
                                    <th class="unit-price-col">Prix unitaire</th>
                                    <th class="amount-col">Montant total</th>
                                    <th class="user-col">Utilisateur</th>
                                    <th class="actions-header no-print no-export">Actions</th> <!-- Header for Edit/Delete -->
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Rows generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Conteneur pour D√©tails D√©penses -->
                <div id="expenses-details-container" class="printable-content hidden">
                     <h3>D√©tails des D√©penses</h3>
                     <!-- START: Added Table Search -->
                     <div class="table-search-container">
                         <label for="search-input-expenses">Filtrer par Motif/Date:</label>
                         <input type="search" id="search-input-expenses" data-table-id="expenses-table" data-column-class="reason-col,date-col" placeholder="Motif ou Date (AAAA-MM-JJ)...">
                     </div>
                     <!-- END: Added Table Search -->
                     <div class="button-group">
                        <button id="print-expenses" class="print-export-btn">Imprimer</button>
                        <button id="export-expenses-excel" class="print-export-btn">Exporter Excel</button>
                        <button id="export-expenses-pdf" class="print-export-btn">Exporter PDF</button>
                    </div>
                    <div class="table-container">
                        <table id="expenses-table">
                            <thead>
                                <tr >
                                    <th class="date-col sortable-header">Date</th>
                                    <th class="reason-col">Motif</th>
                                    <th class="quantity-col">Qt√©</th>
                                    <th class="amount-col">Montant</th>
                                    <th class="user-col">Utilisateur</th>
                                    <th class="actions-header no-print no-export">Actions</th> <!-- Header for Edit/Delete -->
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Rows generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Conteneur pour D√©tails Divers -->
                <div id="others-details-container" class="printable-content hidden">
                    <h3>D√©tails des Op√©rations Diverses</h3>
                     <!-- START: Added Table Search -->
                     <div class="table-search-container">
                         <label for="search-input-others">Filtrer par D√©signation/Date:</label>
                         <input type="search" id="search-input-others" data-table-id="others-table" data-column-class="designation-col,date-col" placeholder="D√©signation ou Date (AAAA-MM-JJ)...">
                     </div>
                     <!-- END: Added Table Search -->
                     <div class="button-group">
                        <button id="print-others" class="print-export-btn">Imprimer</button>
                        <button id="export-others-excel" class="print-export-btn">Exporter Excel</button>
                        <button id="export-others-pdf" class="print-export-btn">Exporter PDF</button>
                    </div>
                    <div class="table-container">
                        <table id="others-table">
                            <thead>
                                <tr >
                                    <th class="date-col sortable-header">Date</th>
                                    <th class="designation-col">D√©signation/Motif</th>
                                    <th class="quantity-col">Quantit√©</th>
                                    <th class="amount-col">Montant Total</th>
                                    <th class="user-col">Utilisateur</th>
                                    <th class="actions-header no-print no-export">Actions</th> <!-- Header for Edit/Delete -->
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Rows generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
             </section>

            <!-- Section Employees -->
            <section id="employees-section" class="form-container hidden">
                <h2>Gestion des Employ√©s</h2>
                <form id="employee-form">
                     <input type="hidden" id="employee-edit-index" value="">
                     <h4>Informations Employ√©</h4>
                    <div class="form-row">
                        <div> <label for="employee-nom">Nom:</label> <input type="text" id="employee-nom" required> </div>
                        <div> <label for="employee-prenom">Pr√©nom:</label> <input type="text" id="employee-prenom"> </div>
                        <div> <label for="employee-role">Statut:</label> <input type="text" id="employee-role"> </div>
                    </div>
                     <div class="form-row">
                        <div> <label for="employee-adresse">Adresse:</label> <input type="text" id="employee-adresse"> </div>
                        <div> <label for="employee-telephone">T√©l√©phone:</label> <input type="tel" id="employee-telephone"> </div>
                        <div> <label for="employee-lieu-residence">Lieu de r√©sidence:</label> <input type="text" id="employee-lieu-residence"> </div>
                     </div>
                     <div class="form-row">
                        <div> <label for="employee-jours-travail">Jours de travail:</label> <input type="text" id="employee-jours-travail" placeholder="Ex: Lundi-Vendredi"> </div>
                        <div> <label for="employee-heure-arrivee">Heure d'arriv√©e:</label> <input type="time" id="employee-heure-arrivee"> </div>
                        <div> <label for="employee-heure-depart">Heure de d√©part:</label> <input type="time" id="employee-heure-depart"> </div>
                     </div>
                     <div class="form-row">
                        <div> <label for="employee-salary">Salaire:</label> <input type="number" id="employee-salary" min="0" step="any"> </div>
                        <div> <label for="employee-paid-amount">Montant Total Pay√© (Cumul√©):</label> <input type="number" id="employee-paid-amount" min="0" step="any"> </div>
                        <div> <label for="employee-hire-date">Date d'embauche:</label> <input type="date" id="employee-hire-date"> </div>
                        <div>
                             <label for="employee-user-connected">Utilisateur connect√©:</label>
                             <input type="text" id="employee-user-connected" class="user-connected-field" readonly>
                         </div>
                     </div>
                     <h4>Personne √† contacter en cas d'urgence</h4>
                     <div class="form-row">
                        <div> <label for="employee-contact-person-nom">Nom:</label> <input type="text" id="employee-contact-person-nom"> </div>
                        <div> <label for="employee-contact-person-prenom">Pr√©nom:</label> <input type="text" id="employee-contact-person-prenom"> </div>
                     </div>
                    <div class="form-row">
                         <div> <label for="employee-contact-person-adresse">Adresse:</label> <input type="text" id="employee-contact-person-adresse"> </div>
                         <div> <label for="employee-contact-person-telephone">T√©l√©phone:</label> <input type="tel" id="employee-contact-person-telephone"> </div>
                        <div> <label for="employee-contact-person-lieu-residence">Lieu de r√©sidence:</label> <input type="text" id="employee-contact-person-lieu-residence"> </div>
                    </div>
                    <button type="submit">Ajouter Employ√©</button>
                </form>

                <hr class="section-divider">
                <h4>Demandes de Permission Employ√©s</h4>
                <form id="permission-employee-form">
                    <div class="form-row">
                        <div>
                            <label for="perm-emp-req-date">Date Demande:</label>
                            <input type="date" id="perm-emp-req-date" required>
                        </div>
                        <div>
                            <label for="perm-emp-name">Employ√©:</label>
                            <select id="perm-emp-name" required>
                                <option value="">-- Choisir Employ√© --</option>
                            </select>
                        </div>
                         <!-- START: Added Category Select for Employee Permission -->
                         <div>
                            <label for="perm-emp-category">Cat√©gorie:</label>
                            <select id="perm-emp-category" required>
                                <option value="">-- Choisir --</option>
                                <option value="Permission">Permission</option>
                                <option value="Absence">Absence</option>
                                <option value="Cong√©">Cong√©</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                         <!-- END: Added Category Select for Employee Permission -->
                         <div>
                            <label for="perm-emp-date">Date/P√©riode:</label>
                            <input type="text" id="perm-emp-date" placeholder="Ex: 15/08/2024 ou 15 au 17/08/2024" required>
                        </div>
                         <div>
                             <label for="perm-emp-user-connected">Demand√© par (Utilisateur):</label>
                             <input type="text" id="perm-emp-user-connected" class="user-connected-field" readonly>
                         </div>
                    </div>
                    <div class="form-row">
                        <div style="flex-basis: 100%;">
                            <label for="perm-emp-reason">Motif:</label>
                            <textarea id="perm-emp-reason" rows="3" required></textarea>
                        </div>
                    </div>
                    <button type="submit">Ajouter Demande Permission</button>
                </form>

                <button id="show-employee-permissions-button" class="secondary-btn">Afficher/Masquer Permissions Employ√©s</button>
                <div id="employee-permissions-container" class="printable-content hidden">
                     <h3>Liste des Demandes de Permission (Employ√©s)</h3>
                     <!-- START: Added Table Search -->
                     <div class="table-search-container">
                         <label for="search-input-employee-permissions">Filtrer par Employ√©/Motif/Date:</label>
                         <input type="search" id="search-input-employee-permissions" data-table-id="employee-permissions-table" data-column-class="name-col,reason-col,date-col" placeholder="Nom, motif ou Date (AAAA-MM-JJ)...">
                     </div>
                     <!-- END: Added Table Search -->
                     <div class="button-group">
                        <button id="print-employee-permissions" class="print-export-btn">Imprimer</button>
                        <button id="export-employee-permissions-excel" class="print-export-btn">Exporter Excel</button>
                        <button id="export-employee-permissions-pdf" class="print-export-btn">Exporter PDF</button>
                    </div>
                    <div class="table-container">
                        <table id="employee-permissions-table">
                            <thead>
                                <tr >
                                    <th class="date-col sortable-header">Date Demande</th>
                                    <th class="name-col">Employ√©</th>
                                    <th class="category-col">Cat√©gorie</th> <!-- NEW TH -->
                                    <th>Date/P√©riode</th>
                                    <th class="reason-col">Motif</th>
                                    <th class="status-col">Statut</th>
                                    <th class="user-col">Traitement (Utilisateur/Date)</th>
                                    <th class="actions-header no-print no-export">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Rows generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <button id="show-employees-details-button" class="secondary-btn">Afficher/Masquer Liste Employ√©s</button>
                <div id="employees-details-container" class="printable-content hidden">
                     <h3>Liste des Employ√©s</h3>
                     <!-- START: Added Table Search -->
                     <div class="table-search-container">
                         <label for="search-input-employees">Filtrer par Nom/Pr√©nom/Date Embauche:</label>
                         <input type="search" id="search-input-employees" data-table-id="employees-table" data-column-class="name-col,date-col" placeholder="Nom, pr√©nom ou Date (AAAA-MM-JJ)...">
                     </div>
                     <!-- END: Added Table Search -->
                     <div class="button-group">
                        <button id="print-employees" class="print-export-btn">Imprimer</button>
                        <button id="export-employees-excel" class="print-export-btn">Exporter Excel</button>
                        <button id="export-employees-pdf" class="print-export-btn">Exporter PDF</button>
                    </div>
                    <div class="table-container">
                        <table id="employees-table" >
                            <thead>
                                <tr >
                                    <th class="name-col">Nom</th>
                                    <th class="name-col">Pr√©nom</th>
                                    <th class="status-col">Statut</th>
                                    <th class="date-col sortable-header">Date Embauche</th>
                                    <th class="address-col">Adresse</th>
                                    <th class="contact-col">T√©l√©phone</th>
                                    <th class="residence-col">Lieu R√©sidence</th>
                                    <th class="workdays-col">Jours Travail</th>
                                    <th class="time-col">Heure Arriv√©e</th>
                                    <th class="time-col">Heure D√©part</th>
                                    <th class="salary-col">Salaire</th>
                                    <th class="amount-col">Montant Pay√©</th>
                                    <th class="remaining-salary-col">Salaire Restant D√ª</th>
                                    <th class="contact-col">Contact Urg. (Nom Pr√©nom)</th>
                                    <th class="contact-col">Contact Urg. (T√©l)</th>
                                    <th class="actions-header no-print no-export">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Rows generated by JS -->
                             </tbody>
                         </table>
                     </div>
                </div>
            </section>

            <!-- Section Learners -->
            <section id="learners-section" class="form-container hidden">
                 <h2>Gestion des Apprenants</h2>
                  <form id="learner-form">
                      <input type="hidden" id="learner-edit-index" value="">
                      <h4>Informations Apprenant</h4>
                     <div class="form-row">
                         <div> <label for="learner-nom">Nom:</label> <input type="text" id="learner-nom" required> </div>
                         <div> <label for="learner-prenom">Pr√©nom:</label> <input type="text" id="learner-prenom"> </div>
                         <div> <label for="learner-age">√Çge:</label> <input type="number" id="learner-age" min="0"> </div>
                         <div>
                             <label for="learner-user-connected">Utilisateur connect√©:</label>
                             <input type="text" id="learner-user-connected" class="user-connected-field" readonly>
                         </div>
                     </div>
                     <div class="form-row">
                         <div> <label for="learner-adresse">Adresse:</label> <input type="text" id="learner-adresse"> </div>
                         <div> <label for="learner-lieu-residence">Lieu de r√©sidence:</label> <input type="text" id="learner-lieu-residence"> </div>
                         <div> <label for="learner-niveau-etudes">Niveau d'√©tudes:</label> <input type="text" id="learner-niveau-etudes"> </div>
                         <div> <label for="learner-situation-matrimoniale">Situation Matrimoniale:</label> <select id="learner-situation-matrimoniale"> <option value="">-- Choisir --</option> <option value="C√©libataire">C√©libataire</option> <option value="Mari√©(e)">Mari√©(e)</option> <option value="Divorc√©(e)">Divorc√©(e)</option> <option value="Veuf(ve)">Veuf(ve)</option> <option value="Autre">Autre</option> </select> </div>
                     </div>
                      <h4>Informations Parents</h4>
                      <div class="form-row">
                         <div> <label for="learner-pere-nom">Nom du P√®re:</label> <input type="text" id="learner-pere-nom"> </div>
                         <div> <label for="learner-pere-prenom">Pr√©nom du P√®re:</label> <input type="text" id="learner-pere-prenom"> </div>
                      </div>
                      <div class="form-row">
                          <div> <label for="learner-mere-nom">Nom de la M√®re:</label> <input type="text" id="learner-mere-nom"> </div>
                          <div> <label for="learner-mere-prenom">Pr√©nom de la M√®re:</label> <input type="text" id="learner-mere-prenom"> </div>
                      </div>
                      <h4>Informations Formation</h4>
                      <div class="form-row">
                         <div> <label for="learner-filiere">Fili√®re d'inscription:</label> <input type="text" id="learner-filiere" required> </div>
                         <div> <label for="learner-duree-formation">Dur√©e de la Formation:</label> <input type="text" id="learner-duree-formation"> </div>
                      </div>
                      <div class="form-row">
                         <div> <label for="learner-frais-documents">Frais des Documents (Pay√©):</label> <input type="number" id="learner-frais-documents" min="0" step="any"> </div>
                      </div>
                      <h4>Frais de la Formation (Montants Pay√©s par Tranche)</h4>
                      <div class="form-row">
                          <div> <label for="learner-tranche1">1√®re Tranche (Pay√©):</label> <input type="number" id="learner-tranche1" min="0" step="any"> </div>
                          <div> <label for="learner-tranche2">2√®me Tranche (Pay√©):</label> <input type="number" id="learner-tranche2" min="0" step="any"> </div>
                          <div> <label for="learner-tranche3">3√®me Tranche (Pay√©):</label> <input type="number" id="learner-tranche3" min="0" step="any"> </div>
                          <div> <label for="learner-tranche4">4√®me Tranche (Pay√©):</label> <input type="number" id="learner-tranche4" min="0" step="any"> </div>
                      </div>
                      <h4>Engagement</h4>
                     <div class="form-row">
                         <div> <label for="learner-garant-nom">Nom du Garant:</label> <input type="text" id="learner-garant-nom"> </div>
                         <div> <label for="learner-garant-prenom">Pr√©nom du Garant:</label> <input type="text" id="learner-garant-prenom"> </div>
                     </div>
                     <div class="form-row">
                         <div> <label for="learner-garant-telephone">T√©l√©phone du Garant:</label> <input type="tel" id="learner-garant-telephone"> </div>
                         <div> <label for="learner-garant-adresse">Adresse du Garant:</label> <input type="text" id="learner-garant-adresse"> </div>
                     </div>
                     <button type="submit">Ajouter Apprenant</button>
                </form>

                  <hr class="section-divider">
                  <h4>Demandes de Permission Apprenants</h4>
                 <form id="permission-learner-form">
                     <div class="form-row">
                         <div>
                             <label for="perm-lrn-req-date">Date Demande:</label>
                             <input type="date" id="perm-lrn-req-date" required>
                         </div>
                         <div>
                             <label for="perm-lrn-name">Apprenant:</label>
                             <select id="perm-lrn-name" required>
                                 <option value="">-- Choisir Apprenant --</option>
                             </select>
                         </div>
                         <!-- START: Added Category Select for Learner Permission -->
                         <div>
                            <label for="perm-lrn-category">Cat√©gorie:</label>
                            <select id="perm-lrn-category" required>
                                <option value="">-- Choisir --</option>
                                <option value="Permission">Permission</option>
                                <option value="Absence">Absence</option>
                                <option value="Cong√©">Cong√©</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                         <!-- END: Added Category Select for Learner Permission -->
                         <div>
                             <label for="perm-lrn-date">Date/P√©riode:</label>
                             <input type="text" id="perm-lrn-date" placeholder="Ex: 15/08/2024 ou 15 au 17/08/2024" required>
                         </div>
                         <div>
                             <label for="perm-lrn-user-connected">Demand√© par (Utilisateur):</label>
                             <input type="text" id="perm-lrn-user-connected" class="user-connected-field" readonly>
                         </div>
                    </div>
                    <div class="form-row">
                        <div style="flex-basis: 100%;">
                            <label for="perm-lrn-reason">Motif:</label>
                            <textarea id="perm-lrn-reason" rows="3" required></textarea>
                        </div>
                    </div>
                    <button type="submit">Ajouter Demande Permission</button>
                </form>

                <button id="show-learner-permissions-button" class="secondary-btn">Afficher/Masquer Permissions Apprenants</button>
                <div id="learner-permissions-container" class="printable-content hidden">
                     <h3>Liste des Demandes de Permission (Apprenants)</h3>
                     <!-- START: Added Table Search -->
                     <div class="table-search-container">
                         <label for="search-input-learner-permissions">Filtrer par Apprenant/Motif/Date:</label>
                         <input type="search" id="search-input-learner-permissions" data-table-id="learner-permissions-table" data-column-class="name-col,reason-col,date-col" placeholder="Nom, motif ou Date (AAAA-MM-JJ)...">
                     </div>
                     <!-- END: Added Table Search -->
                     <div class="button-group">
                         <button id="print-learner-permissions" class="print-export-btn">Imprimer</button>
                         <button id="export-learner-permissions-excel" class="print-export-btn">Exporter Excel</button>
                         <button id="export-learner-permissions-pdf" class="print-export-btn">Exporter PDF</button>
                     </div>
                     <div class="table-container">
                         <table id="learner-permissions-table">
                             <thead>
                                 <tr >
                                     <th class="date-col sortable-header">Date Demande</th>
                                     <th class="name-col">Apprenant</th>
                                     <th class="category-col">Cat√©gorie</th> <!-- NEW TH -->
                                     <th>Date/P√©riode</th>
                                     <th class="reason-col">Motif</th>
                                     <th class="status-col">Statut</th>
                                     <th class="user-col">Traitement (Utilisateur/Date)</th>
                                     <th class="actions-header no-print no-export">Actions</th>
                                 </tr>
                            </thead>
                            <tbody>
                                <!-- Rows generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <button id="show-learners-details-button" class="secondary-btn">Afficher/Masquer Liste Apprenants</button>
                <div id="learners-details-container" class="printable-content hidden">
                     <h3>Liste des Apprenants</h3>
                     <!-- START: Added Table Search -->
                     <div class="table-search-container">
                         <label for="search-input-learners">Filtrer par Nom/Pr√©nom/Fili√®re:</label>
                         <input type="search" id="search-input-learners" data-table-id="learners-table" data-column-class="name-col,filiere-col" placeholder="Nom, pr√©nom ou fili√®re...">
                     </div>
                     <!-- END: Added Table Search -->
                    <div class="button-group">
                            <button id="print-learners" class="print-export-btn">Imprimer</button>
                            <button id="export-learners-excel" class="print-export-btn">Exporter Excel</button>
                            <button id="export-learners-pdf" class="print-export-btn">Exporter PDF</button>
                    </div>
                    <div class="table-container">
                        <table id="learners-table">
                            <thead> <tr> <th class="name-col">Nom</th> <th class="name-col">Pr√©nom</th> <th class="age-col">√Çge</th> <th>Adresse</th> <th>Lieu R√©sid.</th> <th>Niv. √âtudes</th> <th>Sit. Matrim.</th> <th>P√®re</th> <th>M√®re</th> <th class="filiere-col">Fili√®re</th> <th>Dur√©e Form.</th> <th class="amount-col">Frais Docs</th> <th class="amount-col">Tr. 1</th> <th class="amount-col">Tr. 2</th> <th class="amount-col">Tr. 3</th> <th class="amount-col">Tr. 4</th> <th>Garant</th> <th>Garant T√©l</th> <th>Garant Adr.</th> <th class="actions-header no-print no-export">Actions</th> </tr> </thead>
                            <tbody>
                                <!-- Rows generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

             <!-- Section Mobile Money (Existing - Unchanged Structure) -->
             <section id="mobile-money-section" class="form-container hidden">
                 <h2>Gestion du Cabinet Mobile Money</h2>

                 <form id="mobile-money-form">
                      <input type="hidden" id="mobile-money-edit-index" value="">
                     <h4>Point Journalier</h4>
                     <div class="form-row">
                          <div> <label for="mm-date">Date:</label> <input type="date" id="mm-date" required> </div>
                         <div> <label for="mm-agent">Agent au poste:</label> <input type="text" id="mm-agent" required> </div>
                         <div>
                             <label for="mm-point-user-connected">Enregistr√© par:</label>
                             <input type="text" id="mm-point-user-connected" class="user-connected-field" readonly>
                         </div>
                     </div>
                      <h5>Soldes</h5>
                     <div class="form-row">
                          <div> <label for="mm-balance-moov">Solde Moov:</label> <input type="number" id="mm-balance-moov" min="0" step="any" required> </div>
                         <div> <label for="mm-balance-mtn">Solde MTN:</label> <input type="number" id="mm-balance-mtn" min="0" step="any" required> </div>
                         <div> <label for="mm-balance-celttis">Solde Celttis:</label> <input type="number" id="mm-balance-celttis" min="0" step="any" required> </div>
                          <div> <label for="mm-balance-cash">Solde Esp√®ce:</label> <input type="number" id="mm-balance-cash" min="0" step="any" required> </div>
                     </div>
                      <h5>Cr√©dits</h5>
                      <div class="form-row">
                         <div> <label for="mm-credit-moov">Cr√©dit Moov:</label> <input type="number" id="mm-credit-moov" min="0" step="any"> </div>
                         <div> <label for="mm-credit-mtn">Cr√©dit MTN:</label> <input type="number" id="mm-credit-mtn" min="0" step="any"> </div>
                          <div> <label for="mm-credit-celttis">Cr√©dit Celttis:</label> <input type="number" id="mm-credit-celttis" min="0" step="any"> </div>
                     </div>
                      <h5>Pertes Journali√®res</h5>
                      <div class="form-row">
                         <div> <label for="mm-perte-transfert">Perte Transfert/Retrait:</label> <input type="number" id="mm-perte-transfert" min="0" step="any"> </div>
                         <div> <label for="mm-perte-credit">Perte Cr√©dit:</label> <input type="number" id="mm-perte-credit" min="0" step="any"> </div>
                     </div>
                     <button type="submit">Ajouter Point Journalier</button>
                 </form>

                 <hr class="section-divider">

                  <form id="mm-fournisseur-form">
                      <input type="hidden" id="mm-fournisseur-edit-key" value="">
                     <h4>Fournisseurs Mobile Money</h4>
                     <div class="form-row">
                         <div><label for="mm-fournisseur-nom">Nom Fournisseur:</label><input type="text" id="mm-fournisseur-nom" required></div>
                         <div><label for="mm-fournisseur-prenom">Pr√©nom Fournisseur:</label><input type="text" id="mm-fournisseur-prenom"></div>
                         <div><label for="mm-fournisseur-contact">Contact Fournisseur:</label><input type="tel" id="mm-fournisseur-contact"></div>
                         <div>
                             <label for="mm-fournisseur-user-connected">Enregistr√© par:</label>
                             <input type="text" id="mm-fournisseur-user-connected" class="user-connected-field" readonly>
                         </div>
                     </div>
                     <div class="form-row">
                         <div><label for="mm-fournisseur-montant">Montant Fourni:</label><input type="number" id="mm-fournisseur-montant" min="0" step="any" required></div>
                         <div><label for="mm-fournisseur-interet">Int√©r√™t (%):</label><input type="number" id="mm-fournisseur-interet" min="0" step="any"></div>
                         <div><label for="mm-fournisseur-vendu">Cr√©dit Vendu (Cumul√©):</label><input type="number" id="mm-fournisseur-vendu" min="0" step="any"></div>
                     </div>
                      <button type="submit">Ajouter / Mettre √† Jour Fournisseur</button>
                  </form>

                 <button id="show-mobile-money-details-button" class="secondary-btn">Afficher/Masquer Points Journaliers</button>
                 <button id="show-mm-fournisseurs-details-button" class="secondary-btn">Afficher/Masquer Liste Fournisseurs</button>

                 <div id="mobile-money-details-container" class="printable-content hidden">
                      <h3>D√©tails Points Journaliers Mobile Money</h3>
                      <!-- START: Added Table Search -->
                      <div class="table-search-container">
                          <label for="search-input-mobile-money">Filtrer par Agent/Date:</label>
                          <input type="search" id="search-input-mobile-money" data-table-id="mobile-money-table" data-column-class="agent-col,date-col" placeholder="Agent ou Date (AAAA-MM-JJ)...">
                      </div>
                      <!-- END: Added Table Search -->
                      <div class="button-group">
                             <button id="print-mobile-money" class="print-export-btn">Imprimer</button>
                             <button id="export-mobile-money-excel" class="print-export-btn">Exporter Excel</button>
                             <button id="export-mobile-money-pdf" class="print-export-btn">Exporter PDF</button>
                     </div>
                     <div class="table-container">
                         <table id="mobile-money-table">
                             <thead> <tr > <th class="date-col sortable-header">Date</th> <th class="agent-col">Agent</th> <th class="balance-col">Solde Moov</th> <th class="balance-col">Solde MTN</th> <th class="balance-col">Solde Celttis</th> <th class="balance-col">Solde Esp√®ce</th> <th class="balance-col">Total Solde</th> <th class="credit-col">Cr√©dit Moov</th> <th class="credit-col">Cr√©dit MTN</th> <th class="credit-col">Cr√©dit Celttis</th> <th class="credit-col">Total Cr√©dit</th> <th class="amount-col">Perte Trans/Retrait</th> <th class="amount-col">Perte Cr√©dit</th> <th class="user-col">Utilisateur</th> <th class="actions-header no-print no-export">Actions</th> </tr> </thead>
                             <tbody>
                                 <!-- Rows generated by JS -->
                             </tbody>
                         </table>
                     </div>
                 </div>

                 <div id="mm-fournisseurs-details-container" class="printable-content hidden">
                      <h3>Liste des Fournisseurs Mobile Money</h3>
                      <!-- START: Added Table Search -->
                      <div class="table-search-container">
                          <label for="search-input-mm-fournisseurs">Filtrer par Nom/Pr√©nom:</label>
                          <input type="search" id="search-input-mm-fournisseurs" data-table-id="mm-fournisseurs-table" data-column-class="name-col" placeholder="Nom ou pr√©nom...">
                      </div>
                      <!-- END: Added Table Search -->
                      <div class="button-group">
                             <button id="print-mm-fournisseurs" class="print-export-btn">Imprimer</button>
                             <button id="export-mm-fournisseurs-excel" class="print-export-btn">Exporter Excel</button>
                             <button id="export-mm-fournisseurs-pdf" class="print-export-btn">Exporter PDF</button>
                     </div>
                     <div class="table-container">
                         <table id="mm-fournisseurs-table">
                             <thead> <tr> <th class="name-col">Nom</th> <th class="name-col">Pr√©nom</th> <th class="contact-col">Contact</th> <th class="amount-col">Montant Fourni</th> <th class="interest-col">Int√©r√™t (%)</th> <th class="amount-col">Cr√©dit Vendu</th> <th class="amount-col">Cr√©dit Restant</th> <th class="actions-header no-print no-export">Actions</th> </tr> </thead>
                             <tbody>
                                 <!-- Rows generated by JS -->
                             </tbody>
                         </table>
                     </div>
                 </div>
             </section>

             <!-- Section Creditors (Existing - Unchanged Structure) -->
             <section id="creditors-section" class="form-container hidden">
                 <h2>Gestion des Comptes Cr√©dit Client</h2>

                  <form id="client-profile-form">
                      <input type="hidden" id="client-profile-edit-key" value="">
                     <h4>Cr√©er / G√©rer Profil Client</h4>
                      <div class="form-row">
                         <div><label for="client-profile-nom">Nom Client:</label><input type="text" id="client-profile-nom" required></div>
                         <div><label for="client-profile-prenom">Pr√©nom Client:</label><input type="text" id="client-profile-prenom"></div>
                         <div><label for="client-profile-statut">Statut Client:</label><input type="text" id="client-profile-statut" placeholder="Ex: R√©gulier, Occasionnel"></div>
                         <div>
                             <label for="client-user-connected">Enregistr√© par:</label>
                             <input type="text" id="client-user-connected" class="user-connected-field" readonly>
                         </div>
                      </div>
                     <div class="form-row">
                         <div><label for="client-profile-adresse">Adresse Client:</label><input type="text" id="client-profile-adresse"></div>
                         <div><label for="client-profile-contact">Contact Client:</label><input type="tel" id="client-profile-contact"></div>
                      </div>
                      <button type="submit">Ajouter / Mettre √† Jour Profil</button>
                  </form>

                  <button id="show-client-profiles-button" class="secondary-btn">Afficher/Masquer Liste Profils Clients</button>
                  <div id="client-profiles-container" class="printable-content hidden">
                      <h3>Liste des Profils Clients</h3>
                      <!-- START: Added Table Search -->
                      <div class="table-search-container">
                          <label for="search-input-client-profiles">Filtrer par Nom/Pr√©nom:</label>
                          <input type="search" id="search-input-client-profiles" data-table-id="client-profiles-table" data-column-class="name-col" placeholder="Nom ou pr√©nom...">
                      </div>
                      <!-- END: Added Table Search -->
                      <div class="button-group">
                         <button id="print-client-profiles" class="print-export-btn">Imprimer</button>
                         <button id="export-client-profiles-excel" class="print-export-btn">Exporter Excel</button>
                         <button id="export-client-profiles-pdf" class="print-export-btn">Exporter PDF</button>
                      </div>
                      <div class="table-container">
                         <table id="client-profiles-table">
                             <thead><tr><th class="name-col">Nom</th><th class="name-col">Pr√©nom</th><th>Adresse</th><th class="contact-col">Contact</th><th class="status-col">Statut</th><th class="actions-header no-print no-export">Actions</th></tr></thead>
                             <tbody>
                                 <!-- Rows generated by JS -->
                             </tbody>
                         </table>
                      </div>
                  </div>

                 <hr class="section-divider">

                 <form id="creditor-form">
                     <input type="hidden" id="creditor-edit-index" value=""> <!-- NEW: Hidden field for editing transactions -->
                     <h4>Ajouter Paiement / Nouvelle Transaction √† Cr√©dit</h4>
                     <div class="form-row">
                          <div> <label for="creditor-date">Date Transaction/Paiement:</label> <input type="date" id="creditor-date" required> </div>
                          <div>
                              <label for="creditor-name">Client:</label>
                              <select id="creditor-name" required>
                                  <option value="">-- Choisir Client --</option>
                              </select>
                         </div>
                         <div>
                             <label for="creditor-user-connected">Enregistr√© par:</label>
                             <input type="text" id="creditor-user-connected" class="user-connected-field" readonly>
                         </div>
                     </div>

                    <div id="selected-client-summary" style="margin-top: 20px; padding: 15px; border: 1px dashed var(--color-border); border-radius: 6px; background-color: var(--color-background); display: none;">
                        <h5>Situation Actuelle du Client</h5>
                        <p><strong>Total D√ª Actuel :</strong> <span id="client-summary-total-due">0.00 FCFA</span></p>
                        <p><strong>Total Pay√© (Historique) :</strong> <span id="client-summary-total-paid">0.00 FCFA</span></p>
                        <p><strong>Solde Restant :</strong> <span id="client-summary-remaining" style="font-weight: bold;">0.00 FCFA</span></p>
                        <p id="client-summary-designations-list" style="font-size: 0.9em; margin-top: 10px;"></p>
                    </div>

                     <div class="form-row">
                        <div>
                             <label for="creditor-designation">D√©signation (Produit/Service):</label>
                             <select id="creditor-designation" required>
                                 <option value="">-- Choisir ou Saisir --</option>
                                 <!-- Existing outstanding designations for the client will be populated here by JS -->
                                 <option value="Autre">Autre (nouvelle transaction)</option>
                             </select>
                             <input type="text" id="creditor-custom-designation" class="hidden" placeholder="Saisir la nouvelle d√©signation" style="margin-top: 5px;">
                         </div>
                         <div> <label for="creditor-quantity">Quantit√©:</label> <input type="number" id="creditor-quantity" min="0" step="any"> </div>
                         <div> <label for="creditor-unit-price">Prix Unitaire:</label> <input type="number" id="creditor-unit-price" min="0" step="any"> </div>
                      </div>
                      <div class="form-row">
                         <div> <label for="creditor-total-amount-due">Montant Total D√ª (Nouvelle Transaction):</label> <input type="number" id="creditor-total-amount-due" min="0" step="any" placeholder="Calcul√© ou √† entrer si nouvelle transac."> </div>
                         <div> <label for="creditor-amount-paid">Montant Pay√© ce jour:</label> <input type="number" id="creditor-amount-paid" min="0" step="any" required> </div>
                      </div>
                     <div class="form-row">
                        <div> <label for="creditor-due-date">Date d'√âch√©ance:</label> <input type="date" id="creditor-due-date"> </div>
                         <div> <label for="creditor-contact">Contact Client (depuis profil):</label> <input type="tel" id="creditor-contact" readonly> </div>
                     </div>
                     <button type="submit">Ajouter Paiement / Cr√©er Cr√©dit</button>
                 </form>

                 <button id="show-creditors-details-button" class="secondary-btn">Afficher/Masquer Transactions Cr√©dit</button>
                 <div id="creditors-details-container" class="printable-content hidden">
                     <h3>D√©tails des Transactions Cr√©dit Client</h3>
                     <!-- START: Added Table Search -->
                     <div class="table-search-container">
                         <label for="search-input-creditors">Filtrer par Client/D√©signation/Date Op.:</label>
                         <input type="search" id="search-input-creditors" data-table-id="creditors-table" data-column-class="name-col,designation-col,date-col" placeholder="Nom, d√©signation ou Date (AAAA-MM-JJ)...">
                     </div>
                     <!-- END: Added Table Search -->
                     <div class="button-group">
                         <button id="print-creditors" class="print-export-btn">Imprimer</button>
                         <button id="export-creditors-excel" class="print-export-btn">Exporter Excel</button>
                         <button id="export-creditors-pdf" class="print-export-btn">Exporter PDF</button>
                     </div>
                     <div class="table-container">
                         <table id="creditors-table">
                             <thead> <tr > <th class="date-col sortable-header">Date Dern. Op.</th> <th class="name-col">Nom Pr√©nom Client</th> <th class="designation-col">D√©signation</th> <th class="quantity-col">Qt√©</th> <th class="unit-price-col">PU</th> <th class="amount-col">Montant Total D√ª</th> <th class="amount-col">Montant Pay√© (Cumul√©)</th> <th class="amount-col ">Montant Restant</th> <th class="date-col sortable-header">Date √âch√©ance</th> <th class="contact-col">Contact</th> <th class="status-col">Statut</th> <th class="user-col">Utilisateur</th> <th class="actions-header no-print no-export">Actions</th> </tr> </thead>
                             <tbody>
                                 <!-- Rows generated by JS -->
                             </tbody>
                         </table>
                     </div>
                 </div>
             </section>

             <!-- Section Debt (Existing - Unchanged Structure) -->
             <section id="debt-section" class="form-container hidden">
                 <h2>Gestion des Dettes / Pr√™ts de l'Entreprise</h2>
                 <form id="debt-form">
                     <input type="hidden" id="debt-edit-index" value="">
                     <div class="form-row">
                         <div> <label for="debt-date">Date:</label> <input type="date" id="debt-date" required> </div>
                         <div> <label for="debt-type">Type:</label> <select id="debt-type" required> <option value="">-- Choisir --</option> <option value="Dette">Dette (Argent d√ª par l'entreprise)</option> <option value="Pr√™t">Pr√™t (Argent pr√™t√© par l'entreprise)</option> </select> </div>
                         <div> <label for="debt-name">Nom (Cr√©ancier / D√©biteur):</label> <input type="text" id="debt-name" required> </div>
                         <div>
                             <label for="debt-user-connected">Enregistr√© par:</label>
                             <input type="text" id="debt-user-connected" class="user-connected-field" readonly>
                         </div>
                     </div>
                     <div class="form-row">
                          <div> <label for="debt-description">Description / Motif:</label> <input type="text" id="debt-description" required> </div>
                         <div> <label for="debt-amount">Montant Total:</label> <input type="number" id="debt-amount" min="0" step="any" required> </div>
                     </div>
                     <div class="form-row">
                         <div> <label for="debt-due-date">Date d'√âch√©ance:</label> <input type="date" id="debt-due-date"> </div>
                          <div> <label for="debt-status">Statut:</label> <select id="debt-status" required> <option value="En cours">En cours</option> <option value="Rembours√© / R√©cup√©r√©">Rembours√© / R√©cup√©r√©</option> <option value="Partiellement Rembours√© / R√©cup√©r√©">Partiellement Rembours√© / R√©cup√©r√©</option> <option value="Annul√©">Annul√©</option> </select> </div>
                     </div>
                     <button type="submit">Ajouter Dette/Pr√™t</button>
                 </form>
                 <button id="show-debt-details-button" class="secondary-btn">Afficher/Masquer D√©tails Dettes/Pr√™ts</button>
                 <div id="debt-details-container" class="printable-content hidden">
                     <h3>D√©tails des Dettes / Pr√™ts de l'Entreprise</h3>
                     <!-- START: Added Table Search -->
                     <div class="table-search-container">
                         <label for="search-input-debt">Filtrer par Cr√©ancier/D√©biteur/Description/Date:</label>
                         <input type="search" id="search-input-debt" data-table-id="debt-table" data-column-class="name-col,description-col,date-col" placeholder="Nom, description ou Date (AAAA-MM-JJ)...">
                     </div>
                     <!-- END: Added Table Search -->
                     <div class="button-group">
                         <button id="print-debt" class="print-export-btn">Imprimer</button>
                         <button id="export-debt-excel" class="print-export-btn">Exporter Excel</button>
                         <button id="export-debt-pdf" class="print-export-btn">Exporter PDF</button>
                     </div>
                     <div class="table-container">
                         <table id="debt-table">
                             <thead> <tr > <th class="date-col sortable-header">Date Enreg.</th> <th class="type-col">Type</th> <th class="name-col">Cr√©ancier/D√©biteur</th> <th class="description-col">Description</th> <th class="amount-col">Montant Total</th> <th class="date-col sortable-header">Date d'√âch√©ance</th> <th class="status-col">Statut</th> <th class="user-col">Utilisateur</th> <th class="actions-header no-print no-export">Actions</th> </tr> </thead>
                             <tbody>
                                 <!-- Rows generated by JS -->
                             </tbody>
                         </table>
                     </div>
                 </div>
             </section>

            <!-- START: NEW SECTION Equipment -->
            <section id="equipment-section" class="form-container hidden">
                <h2>Appareils / Outils Confi√©s aux Employ√©s</h2>
                <form id="equipment-form">
                    <input type="hidden" id="equipment-edit-index" value="">
                    <div class="form-row">
                        <div>
                            <label for="equipment-name">Nom de l'Appareil/Outil:</label>
                            <input type="text" id="equipment-name" required>
                        </div>
                        <div>
                            <label for="equipment-quantity">Nombre:</label>
                            <input type="number" id="equipment-quantity" min="1" required>
                        </div>
                         <div>
                            <label for="equipment-assigned-date">Date Attribution:</label>
                            <input type="date" id="equipment-assigned-date" required>
                        </div>
                        <div>
                            <label for="equipment-user-connected">Utilisateur connect√©:</label>
                            <input type="text" id="equipment-user-connected" class="user-connected-field" readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div>
                            <label for="equipment-accessories">Accessoires Fournis:</label>
                            <input type="text" id="equipment-accessories" placeholder="Ex: Chargeur, Sacoche, etc.">
                        </div>
                        <div>
                            <label for="equipment-employee-name">Employ√© Attitr√©:</label>
                            <select id="equipment-employee-name" required>
                                <option value="">-- Choisir Employ√© --</option>
                                <!-- Options added by JS -->
                            </select>
                        </div>
                    </div>
                     <div class="form-row">
                         <div style="flex-basis: 100%;">
                             <label for="equipment-other-info">Autres Informations / √âtat:</label>
                             <textarea id="equipment-other-info" rows="3"></textarea>
                         </div>
                     </div>
                    <button type="submit">Ajouter Appareil Confi√©</button>
                </form>

                <button id="show-equipment-details-button" class="secondary-btn">Afficher/Masquer Liste Appareils Confi√©s</button>
                <div id="equipment-details-container" class="printable-content hidden">
                     <h3>Liste des Appareils/Outils Confi√©s</h3>
                     <div class="table-search-container">
                         <label for="search-input-equipment">Filtrer par Appareil/Employ√©/Date:</label>
                         <input type="search" id="search-input-equipment" data-table-id="equipment-table" data-column-class="equipment-name-col,employee-name-col,date-col" placeholder="Nom appareil, employ√© ou Date (AAAA-MM-JJ)...">
                     </div>
                     <div class="button-group">
                        <button id="print-equipment" class="print-export-btn">Imprimer</button>
                        <button id="export-equipment-excel" class="print-export-btn">Exporter Excel</button>
                        <button id="export-equipment-pdf" class="print-export-btn">Exporter PDF</button>
                    </div>
                    <div class="table-container">
                        <table id="equipment-table">
                            <thead>
                                <tr >
                                    <th class="date-col sortable-header">Date Attrib.</th>
                                    <th class="equipment-name-col">Nom Appareil/Outil</th>
                                    <th class="quantity-col">Nombre</th>
                                    <th>Accessoires</th>
                                    <th class="employee-name-col">Employ√© Attitr√©</th>
                                    <th>Autres Infos / √âtat</th>
                                    <th class="user-col">Enregistr√© par</th>
                                    <th class="actions-header no-print no-export">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Rows generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            <!-- END: NEW SECTION Equipment -->

            <!-- START: NEW SECTION Pi√®ce en Ligne -->
            <section id="piece-en-ligne-section" class="form-container hidden">
                <h2>Gestion des Pi√®ces en Ligne</h2>
                <form id="piece-en-ligne-form">
                    <input type="hidden" id="piece-en-ligne-edit-index" value="">
                    <div class="form-row">
                        <div>
                            <label for="piece-en-ligne-date">Date:</label>
                            <input type="date" id="piece-en-ligne-date" required>
                        </div>
                        <div>
                            <label for="piece-en-ligne-user-connected">Utilisateur connect√©:</label>
                            <input type="text" id="piece-en-ligne-user-connected" class="user-connected-field" readonly>
                        </div>
                        <div>
                            <label for="piece-en-ligne-designation">D√©signation:</label>
                            <select id="piece-en-ligne-designation" required>
                                <option value="">-- Choisir --</option>
                                <option value="Acte de D√©c√®s">Acte de D√©c√®s</option>
                                <option value="Acte de D√©c√®s de cujus">Acte de D√©c√®s de cujus</option>
                                <option value="Acte de Mariage">Acte de Mariage</option>
                                <option value="Acte de Naissance">Acte de Naissance</option>
                                <option value="Acte de Naissance avec mention marginale">Acte de Naissance avec mention marginale</option>
                                <option value="Acte de Naissance Reconstitu√©">Acte de Naissance Reconstitu√©</option>
                                <option value="Acte de Naissance Transcrit">Acte de Naissance Transcrit</option>
                                <option value="Certificat de R√©sidence">Certificat de R√©sidence</option>
                                <option value="Certificat de Coutume et de C√©libat">Certificat de Coutume et de C√©libat</option>
                                <option value="Certificat d'Identification Personnelle">Certificat d'Identification Personnelle</option>
                                <option value="Carte d'identit√© Nationale Biom√©trique">Carte d'identit√© Nationale Biom√©trique</option>
                                <option value="Certificat Non Enregistrement Acte Naissance">Certificat Non Enregistrement Acte Naissance</option>
                                <option value="Certificat de non inscription de d√©c√®s">Certificat de non inscription de d√©c√®s</option>
                                <option value="Certificat de Non Remariage, de Non Divorce, de...">Certificat de Non Remariage, de Non Divorce, de...</option>
                                <option value="Certificat Num√©ro Personnel d‚ÄôIdentification / fID">Certificat Num√©ro Personnel d‚ÄôIdentification / fID</option>
                                <option value="IFU Personnel">IFU Personnel</option>
                                <option value="IFU Entreprise">IFU Entreprise</option>
                                <option value="Casier Judiciaire">Casier Judiciaire</option>
                                <option value="Registre de Commerce">Registre de Commerce</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                        <div>
                            <label for="piece-en-ligne-unit-price">Prix Unitaire:</label>
                            <input type="number" id="piece-en-ligne-unit-price" min="0" step="any" required>
                        </div>
                        <div>
                            <label for="piece-en-ligne-quantity">Quantit√©:</label>
                            <input type="number" id="piece-en-ligne-quantity" min="1" required>
                        </div>
                        <div>
                            <label for="piece-en-ligne-total-amount">Montant Total:</label>
                            <input type="number" id="piece-en-ligne-total-amount" min="0" step="any" readonly>
                        </div>
                    </div>
                    <button type="submit">Ajouter Pi√®ce en Ligne</button>
                </form>

                <button id="show-piece-en-ligne-details-button" class="secondary-btn">Afficher/Masquer Liste Pi√®ces en Ligne</button>
                <div id="piece-en-ligne-details-container" class="printable-content hidden">
                    <h3>Liste des Pi√®ces en Ligne</h3>
                    <div class="table-search-container">
                        <label for="search-input-piece-en-ligne">Filtrer par D√©signation/Date:</label>
                        <input type="search" id="search-input-piece-en-ligne" data-table-id="piece-en-ligne-table" data-column-class="piece-designation-col,date-col" placeholder="D√©signation ou Date (AAAA-MM-JJ)...">
                    </div>
                    <div class="button-group">
                        <button id="print-piece-en-ligne" class="print-export-btn">Imprimer</button>
                        <button id="export-piece-en-ligne-excel" class="print-export-btn">Exporter Excel</button>
                        <button id="export-piece-en-ligne-pdf" class="print-export-btn">Exporter PDF</button>
                    </div>
                    <div class="table-container">
                        <table id="piece-en-ligne-table">
                            <thead>
                                <tr>
                                    <th class="date-col sortable-header">Date</th>
                                    <th class="piece-designation-col">D√©signation</th>
                                    <th class="unit-price-col">Prix Unitaire</th>
                                    <th class="quantity-col">Quantit√©</th>
                                    <th class="amount-col">Montant Total</th>
                                    <th class="user-col">Utilisateur</th>
                                    <th class="actions-header no-print no-export">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Rows generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            <!-- END: NEW SECTION Pi√®ce en Ligne -->

            <!-- START: NEW SECTION WIFI ZONE -->
            <section id="wifi-zone-section" class="form-container hidden">
                <h2>Gestion WIFI ZONE</h2>
                <form id="wifi-zone-form">
                    <input type="hidden" id="wifi-zone-edit-index" value="">
                    <div class="form-row">
                        <div>
                            <label for="wifi-zone-date">Date:</label>
                            <input type="date" id="wifi-zone-date" required>
                        </div>
                        <div>
                            <label for="wifi-zone-user-connected">Utilisateur connect√©:</label>
                            <input type="text" id="wifi-zone-user-connected" class="user-connected-field" readonly>
                        </div>
                        <div>
                            <label for="wifi-zone-designation">D√©signation:</label>
                            <select id="wifi-zone-designation" required>
                                <option value="">-- Choisir --</option>
                                <option value="1Go">1Go</option>
                                <option value="2Go">2Go</option>
                                <option value="3Go">3Go</option>
                                <option value="5Go">5Go</option>
                                <option value="10Go">10Go</option>
                                <option value="15Go">15Go</option>
                                <option value="20Go">20Go</option>
                                <option value="30Go">30Go</option>
                                <option value="50Go">50Go</option>
                                <option value="1 Heure">1 Heure</option>
                                <option value="2 Heures">2 Heures</option>
                                <option value="3 Heures">3 Heures</option>
                                <option value="4 Heures">4 Heures</option>
                                <option value="5 Heures">5 Heures</option>
                                <option value="1 Jour">1 Jour</option>
                                <option value="2 Jours">2 Jours</option>
                                <option value="3 Jours">3 Jours</option>
                                <option value="1 Semaine">1 Semaine</option>
                                <option value="2 Semaines">2 Semaines</option>
                                <option value="1 Mois">1 Mois</option>
                                <option value="2 Mois">2 Mois</option>
                                <option value="3 Mois">3 Mois</option>
                            </select>
                        </div>
                        <div>
                            <label for="wifi-zone-unit-price">Prix Unitaire:</label>
                            <input type="number" id="wifi-zone-unit-price" min="0" step="any" required>
                        </div>
                        <div>
                            <label for="wifi-zone-quantity">Quantit√©:</label>
                            <input type="number" id="wifi-zone-quantity" min="1" required>
                        </div>
                        <div>
                            <label for="wifi-zone-total-amount">Montant Total:</label>
                            <input type="number" id="wifi-zone-total-amount" min="0" step="any" readonly>
                        </div>
                    </div>
                    <button type="submit">Ajouter Entr√©e WIFI</button>
                </form>

                <button id="show-wifi-zone-details-button" class="secondary-btn">Afficher/Masquer Liste WIFI ZONE</button>
                <div id="wifi-zone-details-container" class="printable-content hidden">
                    <h3>Liste des Entr√©es WIFI ZONE</h3>
                    <div class="table-search-container">
                        <label for="search-input-wifi-zone">Filtrer par D√©signation/Date:</label>
                        <input type="search" id="search-input-wifi-zone" data-table-id="wifi-zone-table" data-column-class="wifi-designation-col,date-col" placeholder="D√©signation ou Date (AAAA-MM-JJ)...">
                    </div>
                    <div class="button-group">
                        <button id="print-wifi-zone" class="print-export-btn">Imprimer</button>
                        <button id="export-wifi-zone-excel" class="print-export-btn">Exporter Excel</button>
                        <button id="export-wifi-zone-pdf" class="print-export-btn">Exporter PDF</button>
                    </div>
                    <div class="table-container">
                        <table id="wifi-zone-table">
                            <thead>
                                <tr>
                                    <th class="date-col sortable-header">Date</th>
                                    <th class="wifi-designation-col">D√©signation</th>
                                    <th class="unit-price-col">Prix Unitaire</th>
                                    <th class="quantity-col">Quantit√©</th>
                                    <th class="amount-col">Montant Total</th>
                                    <th class="user-col">Utilisateur</th>
                                    <th class="actions-header no-print no-export">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Rows generated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            <!-- END: NEW SECTION WIFI ZONE -->

             <!-- Section Reports (Existing - Unchanged Structure) -->
             <section id="report-section" class="form-container hidden">
                 <h2>Bilans</h2>
                 <div class="form-row" style="justify-content: center;">
                      <div><button id="daily-report" class="report-type-btn">Bilan Journalier</button></div>
                      <div><button id="weekly-report" class="report-type-btn">Bilan Hebdomadaire</button></div>
                      <div><button id="monthly-report" class="report-type-btn">Bilan Mensuel</button></div>
                      <div><button id="yearly-report" class="report-type-btn">Bilan Annuel</button></div>
                 </div>
                 <div id="report-filters" class="hidden">
                     <div class="form-row hidden" id="daily-filter"> <div> <label for="report-date">Jour:</label> <input type="date" id="report-date"> </div> </div>
                     <div class="form-row hidden" id="weekly-filter"> <div> <label for="report-week">Semaine:</label> <input type="week" id="report-week"> </div> </div>
                     <div class="form-row hidden" id="monthly-filter"> <div> <label for="report-month">Mois:</label> <input type="month" id="report-month"> </div> </div>
                     <div class="form-row hidden" id="yearly-filter"> <div> <label for="report-year">Ann√©e:</label> <input type="number" id="report-year" min="2020" max="2050"> </div> </div>
                     <button id="generate-report">G√©n√©rer Bilan</button>
                 </div>
                  <button id="show-report-details-button" class="secondary-btn hidden">Afficher/Masquer Bilan</button>
                  <div id="report-details-container" class="printable-content hidden">
                     <h3>Bilan G√©n√©r√©</h3>
                     <!-- START: Added Table Search -->
                     <div class="table-search-container">
                         <label for="search-input-report">Filtrer par Type/D√©tail:</label>
                         <input type="search" id="search-input-report" data-table-id="report-table" data-column-class="type-col,designation-col" placeholder="Type ou d√©tail...">
                     </div>
                     <!-- END: Added Table Search -->
                      <div class="button-group">
                         <button id="print-report" class="print-export-btn">Imprimer</button>
                         <button id="export-report-excel" class="print-export-btn">Exporter Excel</button>
                         <button id="export-report-pdf" class="print-export-btn">Exporter PDF</button>
                     </div>
                     <div class="table-container">
                         <table id="report-table">
                             <thead> <tr> <th class="type-col">Type d'Op√©ration</th> <th class="designation-col">D√©tail</th> <th class="quantity-col">Quantit√©</th> <th class="amount-col">Montant</th> </tr> </thead>
                             <tbody>
                                 <!-- Rows generated by JS -->
                             </tbody>
                         </table>
                     </div>
                 </div>
             </section>

              <!-- Section Invoice Generator (Existing - Unchanged Structure) -->
              <section id="invoice-generator-section" class="form-container hidden">
                 <h2>G√©n√©rateur de Facture</h2>
                 <form id="invoice-generator-form">
                     <input type="hidden" id="invoice-edit-id" value=""> <!-- NEW: Hidden field to store invoice ID for editing -->
                     <h4>Informations G√©n√©rales</h4>
                     <div class="form-row">
                         <div>
                             <label for="invoice-gen-date">Date Facture:</label>
                             <input type="date" id="invoice-gen-date" required>
                         </div>
                         <div>
                             <label for="invoice-gen-client-name">Nom du Client:</label>
                             <input type="text" id="invoice-gen-client-name" required>
                         </div>
                          <div>
                             <label for="invoice-gen-client-contact">Contact Client (Optionnel):</label>
                             <input type="tel" id="invoice-gen-client-contact">
                         </div>
                          <div>
                             <label for="invoice-gen-number">N¬∞ Facture:</label>
                             <input type="text" id="invoice-gen-number" readonly required>
                         </div>
                     </div>

                     <h4>Articles</h4>
                     <div id="invoice-items-container">
                          <!-- Item rows added by JS -->
                     </div>

                     <button type="button" id="add-invoice-item-button" class="secondary-btn" >+ Ajouter Ligne Article</button>

                     <h4>Total</h4>
                      <div class="form-row">
                          <div style="flex-grow: 2;">
                              <label for="invoice-gen-total-words">Total en Lettres:</label>
                              <input type="text" id="invoice-gen-total-words" readonly>
                          </div>
                          <div style="min-width: 200px;">
                              <label for="invoice-gen-total-amount">Montant Total Facture:</label>
                              <input type="number" id="invoice-gen-total-amount" readonly required>
                          </div>
                      </div>
                     <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 20px;">
                        <button type="button" id="preview-print-invoice-button">Pr√©visualiser & Imprimer Facture</button>
                        <button type="button" id="export-invoice-pdf-button">Exporter Facture PDF</button>
                        <button type="button" id="save-update-invoice-button">Enregistrer / Mettre √† Jour Facture</button> <!-- NEW BUTTON -->
                     </div>
                 </form>
             </section>

             <!-- NEW: Section Invoice History -->
             <section id="invoice-history-section" class="form-container hidden">
                 <h2>Historique des Factures G√©n√©r√©es</h2>
                 <div class="table-search-container">
                     <label for="search-input-invoice-history">Filtrer par N¬∞ Facture/Client/Date:</label>
                     <input type="search" id="search-input-invoice-history" data-table-id="invoice-history-table" data-column-class="invoice-number-col,invoice-client-col,date-col" placeholder="N¬∞ facture, client ou date (AAAA-MM-JJ)...">
                 </div>
                 <div class="button-group">
                    <button id="print-invoice-history" class="print-export-btn">Imprimer</button>
                    <button id="export-invoice-history-excel" class="print-export-btn">Exporter Excel</button>
                    <button id="export-invoice-history-pdf" class="print-export-btn">Exporter PDF</button>
                 </div>
                 <div class="table-container">
                     <table id="invoice-history-table">
                         <thead>
                             <tr>
                                 <th class="date-col sortable-header">Date Facture</th>
                                 <th class="invoice-number-col">N¬∞ Facture</th>
                                 <th class="invoice-client-col">Client</th>
                                 <th class="amount-col">Montant Total</th>
                                 <th class="user-col">G√©n√©r√© par</th>
                                 <th class="actions-header no-print no-export">Actions</th>
                             </tr>
                         </thead>
                         <tbody>
                             <!-- Invoice rows generated by JS -->
                         </tbody>
                     </table>
                 </div>
             </section>
             <!-- END: NEW Section Invoice History -->


             <!-- Section Administration (Existing - Unchanged Structure) -->
             <section id="admin-section" class="form-container hidden">
                 <h2>Administration Utilisateurs</h2>
                 <form id="admin-form">
                     <input type="hidden" id="admin-edit-key" value="">
                     <h4>Ajouter / Modifier Utilisateur</h4>
                     <div class="form-row">
                         <div>
                             <label for="admin-username">Nom d'utilisateur:</label>
                             <input type="text" id="admin-username" required>
                         </div>
                         <div>
                             <label for="admin-post">Poste:</label>
                             <input type="text" id="admin-post">
                         </div>
                         <div>
                             <label for="admin-op-user-connected">Op√©ration par:</label>
                             <input type="text" id="admin-op-user-connected" class="user-connected-field" readonly>
                         </div>
                     </div>
                     <div class="form-row">
                         <div>
                             <label for="admin-password">Mot de passe:</label>
                             <input type="password" id="admin-password" placeholder="Entrer pour d√©finir/modifier">
                             <small>Laissez vide si inchang√© lors de la modification.</small>
                         </div>
                         <div>
                             <label for="admin-status">Statut:</label>
                             <select id="admin-status" required>
                                 <option value="Lecteur">Lecteur</option>
                                 <option value="Editeur">Editeur</option>
                                 <option value="Administrateur">Administrateur</option>
                                 <option value="R√©seau">R√©seau</option> <!-- NEW ROLE -->
                             </select>
                         </div>
                     </div>
                     <button type="submit">Ajouter / Mettre √† Jour Utilisateur</button>
                 </form>

                 <hr class="section-divider">

                 <button id="show-admin-users-button" class="secondary-btn">Afficher/Masquer Liste Utilisateurs</button>
                 <div id="admin-users-container" class="printable-content hidden">
                      <h3>Liste des Utilisateurs</h3>
                      <!-- START: Added Table Search -->
                      <div class="table-search-container">
                          <label for="search-input-admin-users">Filtrer par Nom d'utilisateur/Poste:</label>
                          <input type="search" id="search-input-admin-users" data-table-id="admin-table" data-column-class="name-col,post-col" placeholder="Utilisateur ou poste...">
                      </div>
                      <!-- END: Added Table Search -->
                      <div class="button-group">
                         <button id="print-admin-users" class="print-export-btn">Imprimer</button>
                         <button id="export-admin-users-excel" class="print-export-btn">Exporter Excel</button>
                         <button id="export-admin-users-pdf" class="print-export-btn">Exporter PDF</button>
                      </div>
                      <div class="table-container">
                         <table id="admin-table">
                             <thead>
                                 <tr>
                                     <th class="name-col">Nom d'utilisateur</th>
                                     <th class="post-col">Poste</th>
                                     <th class="status-col">Statut</th>
                                     <th class="actions-header no-print no-export">Actions</th>
                                 </tr>
                             </thead>
                             <tbody>
                                 <!-- User rows generated by JS -->
                             </tbody>
                         </table>
                      </div>
                 </div>
             </section>

        </main>

    </div> <!-- End of #printable-area -->

    <div id="invoice-print-area" class="hidden">
        <!-- Invoice content generated here by JS -->
    </div>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script> --> <!-- Alternative PDF lib, not used currently -->

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <!-- <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script> -->


    <!-- Main Script -->
    <script src="script.js"></script>

    <footer>
        <p>¬© <span id="footer-year"></span> Gestionnaire - ETS La Charit√© Modeste. Tous droits r√©serv√©s.</p>
        <p>Con√ßu et D√©velopp√© par GKLM - T√©l√©phone : +229 019 175 5979</p>
    </footer>
</body>

</html>